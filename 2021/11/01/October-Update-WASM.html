<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>October 2021 Update: All about WASM | Theseus OS Blog</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="description" content="Theseus OS Blog">
    



<!-- styles -->
<link rel="stylesheet" href="/styles/vendor.css"/>
<link rel="stylesheet" href="/styles/fonts.css"/>
<link rel="stylesheet" href="/styles/app.css"/>
<link rel="stylesheet" href="/styles/highlight.css"/>

<!-- FontAwesome font-awesome (for icons) -->
<link rel="stylesheet" href="/FontAwesome/css/font-awesome.min.css"/>

<!-- favicon -->
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.ico">
<link rel="icon" type="image/svg+xml" href="/images/theseus_ship.svg">
<link rel="manifest" href="/images/site.webmanifest">

<meta name="msapplication-TileColor" content="#00aba9">
<meta name="theme-color" content="#ffffff">

 <!-- atom -->
 <link type="application/atom+xml" rel="alternate" href="https://theseus-os.github.io/blog/feed.xml" title="Theseus OS Blog" />

  </head>
  <body>
    <nav class="flex flex-row justify-center justify-end-l items-center flex-wrap ph2 pl3-ns pr4-ns">
  <div class="brand flex-auto w-100 w-auto-l self-start tc tl-l">
    <a href="/">
      <img class="v-mid ml0-l" alt="Theseus OS Logo" src="/images/theseus_ship.jpg">
      <span style="font-weight: 100;" class="dib ml1 ml0-l">Theseus OS Blog</span>
    </a>
  </div>

  <ul class="nav list w-100 w-auto-l flex flex-none flex-row flex-wrap justify-center justify-end-l items-center pv2 ph0 ph4-ns">
    <li class="tc pv2 ph2 ph4-ns flex-20-s">
      <span style="white-space: nowrap;">
        <a href="https://github.com/theseus-os/Theseus" target="_blank" rel="noopener">Theseus&nbsp;OS<i style="padding-left: 0.33em;" id="github-icon" class="fa fa-github" aria-hidden="true"></i></a>
      </span>
    </li>
    <li class="tc pv2 ph2 ph4-ns flex-20-s">
      <span style="white-space: nowrap;">
        <a href="https://theseus-os.github.io/Theseus/book/index.html" target="_blank" rel="noopener">Book<i style="padding-left: 0.33em;" id="book-icon" class="fa fa-book" aria-hidden="true"></i></a>
      </span>
    </li>
    <li class="tc pv2 ph2 ph4-ns flex-20-s">
      <span style="white-space: nowrap;">
        <a href="https://theseus-os.github.io/Theseus/doc/___Theseus_Crates___/index.html" target="_blank" rel="noopener">Docs<i style="padding-left: 0.33em;" id="docs-icon" class="fa fa-cubes" aria-hidden="true"></i></a>
      </span>
    </li>
    <li class="tc pv2 ph2 ph4-ns flex-20-s">
      <span style="white-space: nowrap;">
        <a href="https://github.com/sponsors/kevinaboos" target="_blank" rel="noopener">Sponsor&nbsp;Us<i style="padding-left: 0.33em;" id="sponsor-icon" class="fa fa-heart-o" aria-hidden="true"></i>
      </span>
    </li>
    <li class="tc pv2 ph2 ph4-ns flex-20-s">
      <span style="white-space: nowrap;">
        <a href="mailto:theseus.systems@gmail.com?subject=Interested in Theseus OS!">Email<i style="padding-left: 0.33em;" id="email" class="fa fa-envelope-o" aria-hidden="true"></i></a>
      </span>    
    </li>
  </ul>
</nav>

<section id="October 2021 Update: All about WASM" class="white">
  <div class="w-100 mw-none ph3 mw8-m mw8-l center f3">
    <header>
      <h2>October 2021 Update: All about WASM</h2>
      <div class="highlight mt2 mb3"></div>
    </header>

    <div class="publish-date-author">Nov. 1, 2021 &nbsp;&middot;&nbsp; by <a target="_blank" href="https://github.com/kevinaboos">Kevin Boos</a>
    
    </div>

    <div class="post">
      <h2><a href="#bringing-the-wonderful-world-of-wasm-to-theseus" aria-hidden="true" class="anchor" id="bringing-the-wonderful-world-of-wasm-to-theseus"></a>Bringing the Wonderful World of WASM to Theseus</h2>
<blockquote>
<p>Theseus's newest goal is to be a <strong>WASM-native</strong> system, in which a fully-featured WASM runtime can execute in a bare metal environment.</p>
</blockquote>
<p><a href="https://webassembly.org/">WebAssembly</a> (WASM) is a powerful new binary instruction format that offers a &quot;sandboxed&quot; execution environment based on a simple machine model.
WASM's goal is to allow code from a variety of programming languages to be easily deployed on and performantly executed within a web browser-provided environment, effectively realizing the portability dream once envisioned by Java's bytecode format.</p>
<p>In addition, multiple extensions to the standard help to expand WASM's functionality beyond just what is offered by most browsers.
The most notable is <a href="https://github.com/WebAssembly/WASI">WASI</a>, the WebAssembly System Interface, which extends WASM's core functionality with common system-provided features like standard I/O, filesystems, clocks and timekeeping, and more.</p>
<h3><a href="#why-wasm-on-theseus" aria-hidden="true" class="anchor" id="why-wasm-on-theseus"></a>Why WASM on Theseus?</h3>
<p>WASM is the solution to one of the major downsides of safe-language OSes: all components must be written in a safe language in order to uphold the isolation and safety guarantees provided by said language compiler.
This can make it tedious or impossible to support legacy components and interfaces.</p>
<p>With a WASM runtime, Theseus could safely load and run software modules written in any arbitrary unsafe language!
All you'd need to do is compile them into a WASM module, which is quite easy thanks to most major languages supporting WASM targets.
This will also make it significantly easier to run legacy components with complex dependency chains atop Theseus, as we can bundle them all up into self-contained WASM modules with little to no external dependencies.</p>
<h3><a href="#how-do-we-get-there" aria-hidden="true" class="anchor" id="how-do-we-get-there"></a>How do we get there?</h3>
<p>To bring WASM to Theseus, we have started two concurrent projects:</p>
<ol>
<li>The simple approach: use the <a href="https://github.com/paritytech/wasmi"><code>wasmi</code> intepreter crate from parity-tech</a>
<ul>
<li>Relatively simple, as <code>wasmi</code> is <code>no_std</code>-compliant and requires only minimal interfacing with the host platform in order to use it</li>
<li>We can implement WASI system calls as needed, which acts as the glue is the glue between the WASM environment and the rest of Theseus's subsystems</li>
</ul>
</li>
<li>The complex approach: port the <a href="https://github.com/bytecodealliance/wasmtime"><code>wasmtime</code> WASM runtime project</a> to Theseus
<ul>
<li>Massively complex with dozens of platform-specific logic and API calls</li>
<li>Tons of legacy dependencies, e.g., libc- and POSIX-style memory management, signal handling, system calls, and usage of many Rust libstd features</li>
</ul>
</li>
</ol>
<p><a href="https://github.com/vikrammullick">Vikram Mullick</a> has begun working on part 1 above as part of his senior capstone project at Yale.
<a href="https://github.com/kevinaboos">Kevin Boos</a> has begun working on part 2 above, and will also assist with part 1 as needed.</p>
<p>Due to the complex nature of <code>wasmtime</code> with its many legacy dependencies, this two-pronged split approach is quite beneficial, giving us the best of both worlds:</p>
<ul>
<li>Theseus can &quot;quickly&quot; get up and running with basic WASM support, allowing us to:
<ul>
<li>Experiment with running legacy components as WASM modules</li>
<li>Begin implementing support for WASI and other key WASM interfaces, e.g., WebGL</li>
<li>Integrate Theseus's existing runtime loading and linking infrastructure with WASM</li>
</ul>
</li>
<li>We can leverage the existing WASM and WASI infrastructure layers to more easily support <code>wasmtime</code>
<ul>
<li>This will realize a ~10x performance improvement over the initial <code>wasmi</code>, without wasting the initial <code>wasmi</code>-based efforts</li>
</ul>
</li>
</ul>
<p>We look forward to announcing WASM support for Theseus and realizing its full potential as a WASM-native system.</p>

    </div>

    <div>
      <br />
      <hr>
       <a href="../../../2021/10/04/August-September-Update.html" style="float: left;"><< Previous Post</a>  
       <a href="../../../2021/12/31/November-December-Update-WASM.html" style="float: right;">Next Post >></a>  
    </div>
  </div>
</section>

    <footer>
  <div class="w-100 mw-none ph3 mw8-m mw9-l center f3">
    <div class="row">
      <div class="four columns mt3 mt0-l" id="get-help">
        <h4>More info</h4>
        <ul>
          <li><a href="https://github.com/theseus-os/Theseus/">Theseus OS on GitHub</a></li>
          <li><a href="https://github.com/theseus-os/">Theseus OS Organization</a></li>
          <li><a href="mailto:theseus.systems@gmail.com">Contact Us</a></li>
        </ul>
      </div>
      <div class="four columns mt3 mt0-l">
        <h4>Terms and policies</h4>
        <ul>
          <li><a href="https://www.rust-lang.org/policies/code-of-conduct">Rust's Code of Conduct</a></li>
          <li>Licenses:  <a href="https://opensource.org/licenses/MIT">MIT</a>  <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a></li>
          <li><a href="https://github.com/rust-lang/blog.rust-lang.org">Format based on Rust's Blog</a></li>
        </ul>
      </div>
      <div class="four columns mt3 mt0-l">
        <h4>Social</h4>
        <div class="flex flex-row flex-wrap">
          <a href="https://twitter.com/rustlang" target="_blank" rel="noopener" alt="twitter link"><img src="/images/twitter.svg" alt="twitter logo" title="Twitter"/></a>
          <a href="https://www.youtube.com/c/KevinBoosPhD" target="_blank" rel="noopener" alt="youtube link"><img style="padding-top: 6px; padding-bottom:6px" src="/images/youtube.svg" alt="youtube logo" title="YouTube"/></a>
          <a href="https://discord.gg/rust-lang" target="_blank" rel="noopener" alt="discord link"><img src="/images/discord.svg" alt="discord logo" title="Discord"/></a>
          <a href="https://github.com/theseus-os" target="_blank" rel="noopener" alt="github link"><img src="/images/github.svg" alt="github logo" title="GitHub"/></a>
        </div>
        <h4 class="mt4 mb3">RSS</h4>
        <ul>
          <li><a href="/feed.xml">Theseus Blog RSS Feed</a></li>
        </ul>
      </div>

    </div>
    <div class="attribution">
      Maintained by the Theseus OS organization. See a typo?
      <a href="https://github.com/theseus-os/blog" target="_blank" rel="noopener">File an issue here</a>!
    </div>
  </div>
</footer>

<!-- scripts -->
<script src="/scripts/highlight.js"></script>

  </body>
</html>
